<html>

<head>
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
	<title>faw_zombie</title>
	<link rel="icon" href="icon.png">
	<style>
		* {
			margin-top: 0px; 
			margin-bottom: 0px; 
			margin-left: 0px; 
			margin-right: 0px;
			padding: 0;
		}
		body {
			background-color: gray;
			overscroll-behavior: contain;
		}
		#canvas {
			position: absolute;
			width: 100%;
			height: 100%;
			border: 0px solid;
			display: block;
			image-rendering: pixelated;
		}
	</style>
</head>

<body>
	<canvas id="canvas" style="background-color: #dddddd; border-color: #aaaaaa;"></canvas>
	<script type="text/javascript" src="input.js"></script>
	<script>
		let cvs = document.getElementById("canvas");
		let ctx = canvas.getContext("2d");
		let input = getInput();
		let ux = 100 * cvs.height / cvs.width;
		let uy = 100 * cvs.width / cvs.height;

		function animate(lastUpdateTime) {
			ctx.clearRect(0, 0, cvs.width, cvs.height);
			ctx.strokeStyle = 'red';
			if (input.mouse.leftButtonPressed) {
				ctx.fillStyle = 'green';
				ctx.strokeRect(input.mouse.x, input.mouse.y, 0.1 * ux, 0.1 * uy);
			} else if (input.touch.exists) {
				ctx.fillStyle = 'yellow';
				ctx.strokeRect(input.touch.x, input.touch.y, 0.1 * ux, 0.1 * uy);
			} else
				ctx.fillStyle = 'black';
			ctx.fillRect(0, 0, cvs.width / 2, cvs.height / 2);
			window.requestAnimationFrame(function() {
				animate(Date.now());
			});
		}

		function main() {
			ctx.imageSmoothingEnabled = false;
			initializeKeyboardInput(input.keys);
			initializeMouseInput(input.mouse, ctx);
			initializeTouchInput(input.touch, ctx);
			animate(Date.now());
		}

		main()
	</script>
</body>

</html>

